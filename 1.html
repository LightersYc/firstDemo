<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      div {
        width: 300px;
        height: 200px;
        background-color: pink;
        position: relative;
        top: 100px;
        left: 100px;
      }
    </style>
  </head>
  <body>
    <div id="box"></div>
  </body>
  <script>
    var box = document.getElementById("box");
    var body = document.body;
    box.onmousedown = function(e) {
      //   鼠标在盒子上的位置
      var boxX = e.clientX - box.offsetLeft;
      var boxY = e.clientY - box.offsetTop;
      body.onmousemove = function(e) {
        // 盒子的偏移量
        var left = e.clientX - boxX;
        var top = e.clientY - boxY;
        box.style.left = left + "px";
        box.style.top = top + "px";
      };
    };
    body.onmouseup = function() {
      body.onmousemove = null;
      body.onmousedown = null;
    };
    // 红灯三秒亮一次，绿灯两秒亮一次，黄灯一秒亮一次；如何让三个灯不断交替重复亮灯
    function red() {
      console.log("red");
    }

    function green() {
      console.log("green");
    }

    function yellow() {
      console.log("yellow");
    }
    // 回调方法
    // function loop() {
    //   setTimeout(() => {
    //     red();
    //     setTimeout(() => {
    //       green();
    //       setTimeout(() => {
    //         yellow();
    //         loop();
    //       }, 1000);
    //     }, 2000);
    //   }, 3000);
    // }
    // loop();

    function fn(cb, ms) {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          cb();
          resolve();
        }, ms);
      });
    }
    // Promise方法
    // function loop() {
    //   fn(red, 3000)
    //     .then(res => {
    //       return fn(green, 2000);
    //     })
    //     .then(res => {
    //       return fn(yellow, 1000);
    //     })
    //     .then(res => {
    //       loop();
    //     });
    // }
    // loop();

    // async方法
    // async function loop() {
    //   while (true) {
    //     await fn(red, 3000);
    //     await fn(green, 2000);
    //     await fn(yellow, 1000);
    //   }
    // }
    // loop();
  </script>
</html>
